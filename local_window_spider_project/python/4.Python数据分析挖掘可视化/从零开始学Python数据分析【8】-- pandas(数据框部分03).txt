b'\xe4\xbb\x8e\xe9\x9b\xb6\xe5\xbc\x80\xe5\xa7\x8b\xe5\xad\xa6Python\xe6\x95\xb0\xe6\x8d\xae\xe5\x88\x86\xe6\x9e\x90\xe3\x80\x908\xe3\x80\x91-- pandas(\xe6\x95\xb0\xe6\x8d\xae\xe6\xa1\x86\xe9\x83\xa8\xe5\x88\x8603)'               https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9gPT83UXwYPqOeZvMEmPL4wRicxxqhktkhSZiahSMshU8XPNNbySuhibNiaQ/640?wx_fmt=png
 频数统计，顾名思义就是统计某个离散变量各水平的频次。
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9g0RWAVhFasYWI4dicjMoK8GR171fkZhPkX6ibklJTwqcBsexsCeicw8ictA/640?wx_fmt=png
 这里统计的是性别男女的人数，是一个绝对值，如果想进一步查看<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">男女的百分比例</strong></span>，可以通过下面的方式实现：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9gZbWmvg3kr5aefFqKwaGZDesJTs88Y8iajQJrOOdOwBmxQw3BrJE53Lw/640?wx_fmt=png
 而<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在R语言中</strong></span>，<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">table函数</strong>就是起到频数统计的作用，另外还提供了更加灵活的<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">prop.table函数</strong>，可以直接求出比例。
  https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9g6HicRS6zcameSu6ibDZ8UTdKXLibz4OBfnJ3rhzLlUkXCicibs7neJpoMyg/640?wx_fmt=png
 如上是单变量的频数统计，如果需要<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">统计两个离散变量的交叉统计表</strong>，该如何实现？不急，pandas模块提供了<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">crosstab函数</strong>，我们来看看其用法：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9gW5iaibQty1S7CgYQk99mDDERTADUQ7FIsZg9rnODsYtjicl1sDBLYiaJbQ/640?wx_fmt=png
 R语言的话，任然使用table函数即可。
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgW5VjHicyREL0tYy6356yZ9gzCTJcLASSVmSVV28yW8ZicvnG8XTN30DPBTLcnZSDicpguibJ4ibCDwNyw/640?wx_fmt=png
   在数据分析或建模过程中，我们希望数据集是干净的，没有缺失、异常之类，但面临的实际情况确实数据集很脏，例如对于缺失值我们该如何解决？一般情况，缺失值可以通过<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">删除或替补</strong>的方式来处理。首先是要监控每个变量是否存在缺失，缺失的比例如何？这里我们借助于pandas模块中的<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">isnull函数</strong><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">、</strong><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">dropna函数和fillna函数</strong>。
   https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBWoJ2rMR2Qx5obTLiaT8djuSYKcOYNmLj26ZUwvgjlNJ5yakTBrHPiaFw/640?wx_fmt=png
   https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBC9L0ylX8vUxWoF6dZcNVibPD0gogJY84Cr21RKQ9MSwgrAgUibMk9cKg/640?wx_fmt=png
       https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBAOurgsWa7kChRvcoZ8XzlgBdGLYM7sibxo8dXibjTrgsW0a7RIZCvmww/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBvzoOPwrcmiapKqwicCeGvmGiavdDmDXlKSoP9E4pLWCE520FRt1ewdSug/640?wx_fmt=png
 由于df数据集不存在行全为缺失的观测，故没有实现删除。
     https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBJ5HbuHFzohC56bRPr05X6icKTrnibjjHwz8SZH0J351qFlUJic2Jfrf4g/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBjnwEx2JbqR8k8Fkcibt17yuUSDLz4YkYLxwZf5xibxyibMFCsar7546zw/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBqKvaWp3U48uhG8jXyCqO7P6zsU6LI1QfqZicrRNuqDXpoiaO4EAkBzuw/640?wx_fmt=png
 再来看看<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">R语言</strong>是如何重现上面的操作的：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBG5V3HmQq3IFUbuE642NkgZBib5bxToUJNNXg3JR8yhXnO5rRaUPKEug/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBbpD0yRXyAYKuoLic1u81QDgjykX3zLtc60Rf79icKOtFDxRC2KSWEiaRA/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBibYNEYJvN32cxrdODw68RkSqBA5ekg9kvBXibkqwDhrrzlxTazJInZ1Q/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBWcL1MPsEYmxiaaR9siccSxEyflPuEF6KnQFibUoH216muaPjhAd12obXg/640?wx_fmt=png
   https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBSKd3ic5h2FAcGRGdkuBjMrQkib1mkUibKhAB8rUajAI6RJTlo2AibeMl5g/640?wx_fmt=png
 关于<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">缺失值的替补</strong>，在R语言中可以使用<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(2, 30, 170);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Hmisc包中的impute函数</strong></span>，具体操作如下：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXB4zHEELiaKvK3q6J5FDmeBMkf5TiajfUERZYL6vnj3pRRYcO7tPGHOuxg/640?wx_fmt=png
   大家都知道，Python和R在做<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">循环</strong></span>时，<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">效率</strong></span>还是<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">很低</strong></span>的，如何避开循环达到相同的效果呢？这就是接下来我们要研究的<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">映射函数apply</strong>。该函数的目的就是将用户指定的函数运用到数据集的纵轴即各个变量或横轴即各个行。
 例如以上面的统计数据集df各行和各列是否存在缺失为例，原先是这样的：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBC9L0ylX8vUxWoF6dZcNVibPD0gogJY84Cr21RKQ9MSwgrAgUibMk9cKg/640?wx_fmt=png
 现在通过<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">映射函数</strong>可以这样简介而快速的实现：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBUFlfOiapTeJNBUCLXiaJYLcu61FgicbG9kibpWtqgzDLf1GVXaKkiaYVhQA/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBj1pre1zvms9zwrgjhicPhCw9wEricOrpjCTgZWhPCRwDg1qGFkFk57KQ/640?wx_fmt=png
 再如，需要<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">计算每个学生的总成绩，或各科的平均分</strong>，也可以用apply函数实现：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBrGhmwYh0dsXtiaIMe7oMQuFHicuwfyichdlDpjP6CoNJEciaFTFafwbiclQ/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBL9hVI0gBicsgsDib5CYQPtmF7FgYJnx0fL1SUFWjB48TtmUd3SsXmib3g/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBKCDnrcHAzE21td69Nn0mJ2QfrOIwZ12X3B3IpN7IvnDujc9LagZUug/640?wx_fmt=png
 在<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">R语言</strong>中，实现上述映射操作的函数有很多，这里就以<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">sapply和apply</strong>两个函数为例：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBepD94hN6GpFe3yJ3eeD2D4BmvIBJPSecvia5kretHPPITgcFkhF16lg/640?wx_fmt=png
 如图所示，如果需要<span style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(255, 76, 65);"><strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">统计数据集每行的某个值</strong></span>，需要<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">先将数值型的数据框转化为矩阵</strong>，然后基于矩阵使用apply函数。
   如果你想要做类似SQL中的聚合操作，pandas也提供了实现该功能的函数，即<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">groupby函数与aggregate函数</strong>的搭配使用，我们以上面的收入数据集为例作为演示：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBFiaATcl49TLYlnNQwRZB5fEhOFJymSmSFav5W2Fm5KUclqt1SCWxJKQ/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBsqYLFGle2Jtz7IbplEKD30XWAm3YCbia2xcYQXB0smYWLiaEatnvyWpQ/640?wx_fmt=png
   https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBXLI1bmVibxH7yyw5BLLXv3ic5zjokoyY6M1d4QjGC0s0bfsqEM0fzDtQ/640?wx_fmt=png
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBW2ujmK4mSHvjFKO5ONZU2ONS2qUbpNuHCmf2Tic036NXclwGricicVfXg/640?wx_fmt=png
 学会使用Python的pandas模块对数据进行聚合了，那接下来看看<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">R语言</strong>又是如何实现的：
 https://mmbiz.qpic.cn/mmbiz_png/yjFUicxiaClgXcJFxuZLxVW0LaUp8xkQXBPdIYgPvEAmbByq3iaoMdibZhvJD1l4CZD74Fmkz7Diaa6IhaEIvDX2Vpg/640?wx_fmt=png
 R语言的实现数据的聚合操作需要下载<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">dplyr包</strong>，并结合<strong style="margin: 0px;padding: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">group_by函数和summarize函数</strong>。
